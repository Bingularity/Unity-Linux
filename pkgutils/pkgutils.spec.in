Name:		pkgutils
Version:	@VERSION@
Release:	%mkrel @RELEASE@
Summary:	Helper scripts for packaging
License:	GPL
Group:		Development/Tools
URL:		http://rpmfind.unity-linux.org/Unity/%{name}-%{version}-%{release}.noarch.html
Source0:	%{name}-%{version}.tar.xz
Requires:	autoconf
Requires:	automake
Requires:	rpm-build
Requires:	wget
BuildArch:	noarch

%description
bldchrt
  -Autobuilder using chroot environment(s)
  -Can build both 32bit & 64bit versions of pkgs

bldpkg
  -Autobuilder script

create-basesystem
  -Build a chroot environment or create a basic CLI or full iso from rpms

cs
  -Clean spec script

freeme
  -Clean up after exiting chroot

i586
  -Show, enable or disable installed i586 smart channels

jailme
  -Set up before entering chroot

lo
  -Change dir to SOURCES svn dir

mkrepo
  -Create a local repository including folder
   structure, .rpmrc and .rpmmacros files

pinfo
  -Create pkginfo file in svn folder
  -Update package in altsvn (cooker) folder (Optional)

rc
  -Unpack rpm/srpm

req
  -Display packages requiring PKG

rmp
 -Remove packages using smart from listfiles, like the
  *.rmpkg files generated by the bldpkg script

rmvpkg
 -Use smart to remove all installed packages in LISTFILE

saddpkg
 -Use smart to install missing dependencies in SPECFILE or RPMFILE
 -Create a file of the type .remove which can be later used to
  remove installed dependencies via rmvpkg

slinkin
 -Create links in SPECS & SOURCES folders to svn files

spec-clean
 -Clean up specs and generally make them neat-freak friendly

splog
 -Create a new specfile changelog entry

svnadd
  -Add files & folders listed in FILE to svn

svninst
 -Install source rpm(s) and move all files from
  SOURCES & SPECS folders to svn folders

um
  -Unlink missing files in DIR

unmet
  -List unsatisfied dependencies

xzc
  -Recompress .gz & .bz2 files in the .xz format
  -NOT meant for tarballs and will not process files
   with .tar.gz or .tar.bz2 extensions

xzz
  -Recompress .zip files in the .xz format

%prep
%setup -q

%build
%make

%install
%makeinstall

%find_lang %name

%clean
%__rm -rf %{buildroot}

%post
%update_desktop_database
%update_mime_database

%postun
%clean_desktop_database
%clean_mime_database

%files -f %name.lang
%defattr(-,root,root)
@FILE_LIST@

%changelog
* Mon Mar 05 2011 Gianvacca <gianvacca@unity-linux.org> 0.6.7-1-unity2011
- bldpkg: fixed bug in smart options

* Mon Feb 23 2011 Gianvacca <gianvacca@unity-linux.org> 0.6.6-1-unity2011
- bldchrt: added crucial missing macros
- bldpkg: added default smartopts

* Sat Feb 12 2011 mdawkins <mattydaw@gmail.com> 0.6.5-1-unity2011
- create-basesystem: fixed gdm theme error

* Mon Jan 31 2011 Gianvacca <gianvacca@unity-linux.org> 0.6.4-1-unity2011
- create-basesystem: added among the installed scripts
- create-basesystem: major update to new unity-iso structure (mdawkins)
- create-basesystem: fixes for indexhtml and gdm theme (mdawkins)
- create-basesystem: added CORENAME, DISTRONAME and BRANCHNAME distinctions(mdawkins)
- create-basesystem: added functionality to change install-suggests to false (mdawkins)
- create-basesystem: added cli options and other tweaks (Stumpy)
- create-basesystem: commented out error check after smart download since it always gives error 1 in a chroot :( (Stumpy)
- i586: fix typo in help (Stumpy)

* Thu Nov 18 2010 Stumpy <stumpy@unity-linux.org> 0.6.3-1-unity2010
- bldpkg: add patching feature (spec.diff)
- jailme: fix detection of arch in chroot

* Tue Nov 16 2010 mdawkins <mattydaw@gmail.com> 0.6.2-1-unity2010
- create-basesystem: added changes for cli iso

* Sun Nov 14 2010 Gianvacca <gianvacca@unity-linux.org> 0.6.1-1-unity2010
- merged P0 upstream
- created po folder with pot file and initialized po files for it, de, fr, hu, es
- created makefiles to handle installation and maintenance

* Tue Oct 19 2010 Gianvacca <gianvacca@unity-linux.org> 0.6.0-2-unity2010
- added P0 for i18n support

* Sat Oct 09 2010 Stumpy <stumpy@unity-linux.org> 0.6.0-1-unity2010
- bldchrt: fix for new plf channel naming

* Thu Aug 19 2010 Stumpy <stumpy@unity-linux.org> 0.5.6-1-unity2010
- bldpkg: don't delete build log at start

* Wed Aug 18 2010 Stumpy <stumpy@unity-linux.org> 0.5.5-1-unity2010
- bldpkg: really define bldlogfile this time (oops)

* Sat Aug 14 2010 Stumpy <stumpy@unity-linux.org> 0.5.4-1-unity2010
- bldpkg: try harder to get usable changelog for pkginfo packages

* Tue Aug 10 2010 Stumpy <stumpy@unity-linux.org> 0.5.3-1-unity2010
- bldpkg: define bldlogfile before we try to use it

* Mon Aug 09 2010 Stumpy <stumpy@unity-linux.org> 0.5.2-1-unity2010
- bldpkg: show contents of BUILDROOT on failed build

* Tue Jun 29 2010 Stumpy <stumpy@unity-linux.org> 0.5.1-1-unity2010
- bldpkg: add logging for %%prep fail
- pinfo: require arg for pkg name instead of assuming $PWD

* Thu Jun 10 2010 Stumpy <stumpy@unity-linux.org> 0.5.0-1-unity2010
- bldchrt, bldpkg, freeme, jailme, slinkin, splog, svninst updated
- i586, pinfo added

* Fri Feb 05 2010 Stumpy <stumpy@unity-linux.org> 0.4.5-1-unity2010
- more updates to bldchrt & bldpkg

* Sun Jan 24 2010 Stumpy <stumpy@unity-linux.org> 0.4.4-1-unity2010
- updates to bldchrt & bldpkg

* Wed Jan 20 2010 Stumpy <stumpy@unity-linux.org> 0.4.3-1-unity2010
- updates to bldchrt, bldpkg, freeme, jailme, rmp & saddpkg

* Fri Dec 18 2009 Stumpy <stumpy@unity-linux.org> 0.4.2-1-unity2009
- bldpkg now uses arch-specific flag files
- saddpkg added new locales patch

* Wed Dec 16 2009 Stumpy <stumpy@unity-linux.org> 0.4.1-1-unity2009
- bugfixes to bldpkg & bldchrt

* Tue Dec 15 2009 Stumpy <stumpy@unity-linux.org> 0.4.0-1-unity2009
- added bldchrt
- updates to spec-clean-sed.sources & saddpkg

* Thu Dec 10 2009 KDulcimer <kdulcimer@unity-linux.org> 0.3.1-1
- add spec-clean
- kill KDE3 context menus

* Fri Dec 04 2009 Stumpy <stumpy@unity-linux.org> 0.3.0-1-unity2009
- added mkrepo
- updates to bldpkg, jailme, slinkin, svninst

* Wed Nov 04 2009 Stumpy <stumpy@unity-linux.org> 0.2.9-1-unity2009
- updated splog
- added rmp

* Sun Sep 20 2009 Stumpy <stumpy@unity-linux.org> 0.2.8-1-unity2009
- added unmet

* Sun Sep 20 2009 Stumpy <stumpy@unity-linux.org> 0.2.7-1-unity2009
- removed addpkg, gbd, gcr & mkrepo
- added bldpkg, cs, freeme, jailme, lo, rc, req, svnadd, um, xzc & xzz

* Sun May 31 2009 Stumpy <stumpy@unity-linux.org> 0.2.6-1-unity2009
- splog & svninst bugfixes

* Thu May 21 2009 Stumpy <stumpy@unity-linux.org> 0.2.5-1unity2009
- added saddpkg & splog
- minor bugfix to svninst

* Sat May 02 2009 Stumpy <stumpy@unity-linux.org> 0.2.4-1unity2009
- added wget to reqs
- svninst now supports d/l of src.rpm from a URI
- more bug fixes to svninst

* Wed Apr 22 2009 Stumpy <stumpy@unity-linux.org> 0.2.3-1unity2009
- bug fixes to svninst & slinkin

* Mon Apr 20 2009 Stumpy <stumpy@unity-linux.org> 0.2.2-1unity2009
- added svninst & slinkin

* Sat Apr 18 2009 Stumpy <stumpy@unity-linux.org> 0.2.1-1unity2009
- bug fixes in addpkg

* Thu Apr 09 2009 Stumpy <stumpy@unity-linux.org> 0.2.0-1unity2009
- prereq packages for building are now in %%Requires, removed from mkrepo
- more bug fixes

* Wed Apr 01 2009 Gianvacca <gianvacca@unity-linux.org> 0.1.4-1unity2009
- fixes to make the scripts compatible with bash 4

* Sun Mar 15 2009 travisn000 <travisn000@gmail.com> 0.1.2-2pclos2007
- updated mkrepo with: current repo info, network detection via wget to user selected repo
- added useful konqueror context service menus via mimelnks for building rpms (from Santa's Helper tips section)

* Sat Jul 19 2008 Stumpy842 <stump842@gmail.com> 0.1.1-2pclos2007
- rmv ping from mkrepo, broken in VirtualBox w/NAT
- add gcr

* Sun Jul 06 2008 Stumpy842 <stump842@gmail.com> 0.1.1-1pclos2007
- Bumped version to 0.1.1
- Enhancements and bug fixes

* Wed Jun 04 2008 Stumpy842 <stump842@gmail.com> 0.1.0-3pclos2007
- Updated addpkg - ask for apt-get update first

* Sat Jan 26 2008 Stumpy842 <stump842@gmail.com> 0.1.0-2pclos2007
- Added mkrepo

* Mon Jan 14 2008 Stumpy842 <stump842@gmail.com> 0.1.0-1pclos2007
- Build for pclos
